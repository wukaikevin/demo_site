# 批量操作功能使用说明

## 📋 功能概述

管理后台新增了批量处理功能，可以一次性对多个案例进行审核、删除等操作，大大提高管理效率。

## 🎯 支持的批量操作

### 1. 批量通过审核
一次性通过多个待审核案例，无需逐个操作。

### 2. 批量拒绝
一次性拒绝多个案例，可以统一填写拒绝原因。

### 3. 批量删除
一次性删除多个案例（操作不可恢复）。

## 🚀 使用方法

### 基本操作流程

#### 步骤1：选择案例
1. 在案例列表中，勾选想要操作的案例
2. 或者点击顶部的"☑️ 全选"按钮选中当前页所有案例
3. 选中的案例会显示蓝色边框高亮

#### 步骤2：查看选择状态
- 顶部批量操作栏会显示：`已选择 X 个案例`
- 按钮状态会自动启用/禁用

#### 步骤3：执行批量操作

**批量通过**：
1. 点击"✓ 批量通过"按钮
2. 确认操作
3. 等待进度条完成
4. 查看处理结果

**批量拒绝**：
1. 点击"✗ 批量拒绝"按钮
2. 输入拒绝原因（将应用到所有选中的案例）
3. 确认操作
4. 等待进度条完成
5. 查看处理结果

**批量删除**：
1. 点击"🗑️ 批量删除"按钮
2. 二次确认（防止误操作）
3. 等待进度条完成
4. 查看处理结果

## 📊 进度显示

批量操作会显示实时进度：

```
批量通过中... (3/10)
████████████░░░░░░░░ 30%
```

完成后显示结果：
```
✓ 批量通过完成！成功处理 10 个案例
```

如果有失败的情况：
```
⚠️ 批量通过完成！成功 8 个，失败 2 个
```

## 💡 使用技巧

### 技巧1：按状态筛选
1. 先按状态筛选（如只显示"待审核"）
2. 然后全选
3. 批量通过所有待审核案例

### 技巧2：按应用分类筛选
1. 选择特定应用分类
2. 全选该应用的所有案例
3. 批量操作

### 技巧3：跨页选择
- 当前支持单页选择
- 选择后切换页面会保留之前的选择
- 建议在单页内完成批量操作

### 技巧4：取消选择
- 点击"全选"按钮可以取消全选
- 单独取消某个案例的勾选
- 刷新页面会清空所有选择

## ⚡ 性能说明

- 批量操作是逐个执行的串行处理
- 每个操作都会实时更新进度
- 失败的操作不会中断整体流程
- 处理完成后会自动刷新列表和统计

## 🔒 安全提醒

### 批量删除
- ⚠️ 删除操作不可恢复
- 🔔 会二次确认
- 📝 建议删除前先查看案例详情

### 批量审核
- ✅ 通过审核：案例会在首页显示
- ❌ 拒绝审核：案例会被隐藏
- 📝 拒绝原因会记录在案例数据中

## 📱 UI界面

### 批量操作栏
```
┌─────────────────────────────────────────────────────┐
│ 已选择 5 个案例  [✓ 批量通过] [✗ 批量拒绝] [🗑️ 批量删除] │
│ ████████░░░░░░░░░░░░░░░░░ 40%                        │
│ 批量通过中... (2/5)                                 │
└─────────────────────────────────────────────────────┘
```

### 案例卡片
```
┌─────────────────────────┐
│ ⏳ 待审核               │
│ [预览图]                │
│ 案例标题                │
│ 应用: abc | 时间: ...   │
│ [✓] [详情] [通过] [拒绝] [删除] │
└─────────────────────────┘
     ↑
   复选框
```

选中状态：
```
┌─────────────────────────┐
│ ⏳ 待审核               │
│ [预览图]  ← 蓝色边框高亮│
│ 案例标题                │
│ 应用: abc | 时间: ...   │
│ [✓] [详情] [通过] [拒绝] [删除] │
└─────────────────────────┘
```

## 🎮 快捷键（计划中）

未来版本可能添加：
- `Ctrl+A` - 全选当前页
- `Ctrl+D` - 取消全选
- `Enter` - 批量通过
- `Delete` - 批量删除

## 📊 操作日志

批量操作会在控制台输出详细日志：
```
[Batch] 批量通过开始，共 10 个案例
[Batch] 处理案例 20260119001... 成功
[Batch] 处理案例 20260119002... 成功
...
[Batch] 批量通过完成：成功 10 个，失败 0 个
```

## 🐛 故障排查

### 问题1：批量操作按钮不可点击
**原因**：未选择任何案例
**解决**：勾选至少一个案例

### 问题2：进度条不动
**原因**：网络请求失败
**解决**：
1. 检查网络连接
2. 刷新页面重试
3. 查看浏览器控制台错误

### 问题3：部分案例处理失败
**原因**：案例数据损坏或已被删除
**解决**：
1. 查看浏览器控制台日志
2. 失败的案例会显示在错误列表中
3. 单独处理失败的案例

## 📈 性能优化建议

1. **分批处理**：如果案例数量很多（>100），建议分批操作
2. **后台运行**：批量操作时可以切换到其他标签页
3. **定时任务**：对于定期清理，可以设置定时任务自动批量删除旧案例

## 🔧 API接口

后端提供了批量操作API：

**请求**：
```http
POST /admin/api/batch
Content-Type: application/json

{
  "action": "approve",
  "record_ids": ["20260119001", "20260119002", "20260119003"],
  "reason": ""  // 可选，拒绝原因
}
```

**响应**：
```json
{
  "success": true,
  "message": "批量操作完成：成功 3 个，失败 0 个",
  "data": {
    "total": 3,
    "succeeded": 3,
    "failed": 0,
    "errors": []
  }
}
```

## 📝 最佳实践

### 场景1：每日审核流程
```
1. 筛选"待审核"状态
2. 全选所有案例
3. 快速浏览缩略图
4. 取消不想通过的案例
5. 批量通过
```

### 场景2：清理旧数据
```
1. 按时间排序
2. 选择最早期的案例
3. 批量删除
```

### 场景3：批量拒绝违规内容
```
1. 筛选特定应用分类
2. 选择违规案例
3. 批量拒绝（填写统一原因）
```

## 🎓 总结

批量操作功能可以：
- ✅ 节省时间：一次操作多个案例
- ✅ 提高效率：减少重复点击
- ✅ 降低错误：统一的操作标准
- ✅ 实时反馈：进度显示和错误提示

**版本**：v2.1
**更新日期**：2026-01-19

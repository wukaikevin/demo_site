# ç®¡ç†å‘˜è´¦å·è®¤è¯ç³»ç»Ÿä½¿ç”¨è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

æ¡ˆä¾‹å¹³å°ç°åœ¨ä½¿ç”¨ç‹¬ç«‹çš„ç®¡ç†å‘˜è´¦å·ç³»ç»Ÿï¼Œä¸å†ä¾èµ–æ“ä½œç³»ç»Ÿrootå¯†ç ã€‚è´¦å·ä¿¡æ¯å®‰å…¨åœ°ä¿å­˜åœ¨æœåŠ¡å™¨çš„`.auth`æ–‡ä»¶ä¸­ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### âœ… é¦–æ¬¡ä½¿ç”¨ - åˆ›å»ºç®¡ç†å‘˜è´¦å·

1. è®¿é—®ç®¡ç†åå°ï¼š`http://your-server:5000/admin/login`
2. ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹åˆ°æœªåˆ›å»ºç®¡ç†å‘˜è´¦å·
3. æ˜¾ç¤º"åˆ›å»ºç®¡ç†å‘˜è´¦å·"é¡µé¢
4. å¡«å†™ç”¨æˆ·åå’Œå¯†ç ï¼š
   - ç”¨æˆ·åï¼šè‡³å°‘3ä¸ªå­—ç¬¦
   - å¯†ç ï¼šè‡³å°‘6ä¸ªå­—ç¬¦
   - éœ€è¦ç¡®è®¤å¯†ç 
5. ç‚¹å‡»"åˆ›å»ºè´¦å·"
6. åˆ›å»ºæˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°ç®¡ç†åå°

### âœ… æ—¥å¸¸ä½¿ç”¨ - ç™»å½•ç®¡ç†åå°

1. è®¿é—®ï¼š`http://your-server:5000/admin/login`
2. è¾“å…¥ç®¡ç†å‘˜è´¦å·å’Œå¯†ç 
3. ç‚¹å‡»"ç™»å½•"
4. è¿›å…¥ç®¡ç†åå°è¿›è¡Œæ¡ˆä¾‹å®¡æ ¸

### âœ… ä¿®æ”¹å¯†ç 

**æ–¹æ³•1ï¼šåœ¨ç®¡ç†åå°ä¿®æ”¹**
1. ç™»å½•åï¼Œåœ¨é¡µé¢é¡¶éƒ¨ç‚¹å‡»"ğŸ”’ ä¿®æ”¹å¯†ç "æŒ‰é’®
2. è¾“å…¥åŸå¯†ç 
3. è¾“å…¥æ–°å¯†ç ï¼ˆè‡³å°‘6ä¸ªå­—ç¬¦ï¼‰
4. ç¡®è®¤æ–°å¯†ç 
5. ç‚¹å‡»"ç¡®è®¤ä¿®æ”¹"

**æ–¹æ³•2ï¼šåˆ é™¤.authæ–‡ä»¶é‡æ–°åˆ›å»º**
```bash
# åˆ é™¤ç°æœ‰çš„.authæ–‡ä»¶
rm .auth

# é‡æ–°è®¿é—®ç™»å½•é¡µé¢ï¼Œä¼šè‡ªåŠ¨æ˜¾ç¤ºåˆ›å»ºé¡µé¢
```

## ğŸ” å®‰å…¨ç‰¹æ€§

### å¯†ç å­˜å‚¨
- ä½¿ç”¨SHA256å“ˆå¸Œç®—æ³•åŠ å¯†
- ä¿å­˜åœ¨åº”ç”¨æ ¹ç›®å½•çš„`.auth`æ–‡ä»¶
- æ–‡ä»¶æƒé™è®¾ç½®ä¸º600ï¼ˆä»…æ‰€æœ‰è€…å¯è¯»å†™ï¼‰
- ä¸å­˜å‚¨æ˜æ–‡å¯†ç 

### è®¿é—®æ§åˆ¶
- æ‰€æœ‰ç®¡ç†é¡µé¢éœ€è¦ç™»å½•
- Sessionä¼šè¯ç®¡ç†
- ç™»å‡ºåæ¸…é™¤ä¼šè¯

### å¯†ç è¦æ±‚
- æœ€å°é•¿åº¦ï¼š6ä¸ªå­—ç¬¦
- å»ºè®®ä½¿ç”¨å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦ç»„åˆ
- æ–°æ—§å¯†ç ä¸èƒ½ç›¸åŒ

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
demo_site/
â”œâ”€â”€ .auth              # ç®¡ç†å‘˜è´¦å·æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ app.py             # ä¸»ç¨‹åº
â”œâ”€â”€ requirements.txt   # ä¾èµ–
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ admin_setup.html     # åˆ›å»ºè´¦å·é¡µé¢
â”‚   â”œâ”€â”€ admin_login.html     # ç™»å½•é¡µé¢
â”‚   â””â”€â”€ admin_dashboard.html # ç®¡ç†åå°
â””â”€â”€ data/               # æ•°æ®ç›®å½•
```

## ğŸ”§ æŠ€æœ¯å®ç°

### è®¤è¯æµç¨‹

**é¦–æ¬¡è®¿é—®**ï¼š
```
è®¿é—® /admin/login
    â†“
æ£€æŸ¥ .auth æ–‡ä»¶å­˜åœ¨ï¼Ÿ
    â†“ å¦
æ˜¾ç¤ºåˆ›å»ºè´¦å·é¡µé¢
    â†“
æäº¤è´¦å·ä¿¡æ¯
    â†“
å“ˆå¸Œå¯†ç ä¿å­˜åˆ° .auth
    â†“
è‡ªåŠ¨ç™»å½•
```

**æ—¥å¸¸ç™»å½•**ï¼š
```
è®¿é—® /admin/login
    â†“
æ£€æŸ¥ .auth æ–‡ä»¶å­˜åœ¨ï¼Ÿ
    â†“ æ˜¯
æ˜¾ç¤ºç™»å½•é¡µé¢
    â†“
æäº¤è´¦å·å¯†ç 
    â†“
å“ˆå¸Œå¯†ç éªŒè¯
    â†“
åˆ›å»ºsessionä¼šè¯
```

### APIæ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/admin/login` | GET/POST | ç™»å½•/åˆ›å»ºè´¦å· |
| `/admin/logout` | GET | ç™»å‡º |
| `/admin/dashboard` | GET | ç®¡ç†åå° |
| `/admin/api/change-password` | POST | ä¿®æ”¹å¯†ç  |
| `/admin/api/records` | GET | è·å–æ¡ˆä¾‹åˆ—è¡¨ |
| `/admin/api/review/<id>` | POST | å®¡æ ¸æ¡ˆä¾‹ |
| `/admin/api/record/<id>` | DELETE | åˆ é™¤æ¡ˆä¾‹ |
| `/admin/api/stats` | GET | è·å–ç»Ÿè®¡ä¿¡æ¯ |

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæ— æ³•åˆ›å»ºç®¡ç†å‘˜è´¦å·

**ç—‡çŠ¶**ï¼šç‚¹å‡»"åˆ›å»ºè´¦å·"åæç¤ºé”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥åº”ç”¨ç›®å½•æ˜¯å¦æœ‰å†™æƒé™
```bash
ls -la .auth  # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
pwd           # ç¡®è®¤å½“å‰ç›®å½•
```

2. æ£€æŸ¥ç£ç›˜ç©ºé—´
```bash
df -h
```

### é—®é¢˜2ï¼šå¯†ç é”™è¯¯ä½†ç¡®å®šè¾“å…¥æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åˆ é™¤.authæ–‡ä»¶é‡æ–°åˆ›å»º
```bash
rm .auth
```
2. åˆ·æ–°ç™»å½•é¡µé¢
3. é‡æ–°åˆ›å»ºè´¦å·

### é—®é¢˜3ï¼šå¿˜è®°å¯†ç 

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç™»å½•æœåŠ¡å™¨
2. åˆ é™¤.authæ–‡ä»¶
```bash
cd /path/to/demo_site
rm .auth
```
3. é‡æ–°è®¿é—®ç™»å½•é¡µé¢åˆ›å»ºæ–°è´¦å·

### é—®é¢˜4ï¼šæ— æ³•è®¿é—®ç®¡ç†åå°

**æ£€æŸ¥æ¸…å•**ï¼š
- âœ… åº”ç”¨æ˜¯å¦æ­£åœ¨è¿è¡Œ
- âœ… ç«¯å£5000æ˜¯å¦å¼€æ”¾
- âœ… é˜²ç«å¢™æ˜¯å¦å…è®¸è®¿é—®
- âœ… æµè§ˆå™¨æ˜¯å¦æ¸…ç©ºç¼“å­˜

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ¬¡ä½¿ç”¨

```bash
# 1. å¯åŠ¨åº”ç”¨
python app.py

# 2. è®¿é—®ç™»å½•é¡µé¢
# æµè§ˆå™¨æ‰“å¼€ï¼šhttp://localhost:5000/admin/login

# 3. åˆ›å»ºç®¡ç†å‘˜è´¦å·
# - ç”¨æˆ·åï¼šadminï¼ˆæˆ–ä»»æ„3ä¸ªå­—ç¬¦ä»¥ä¸Šï¼‰
# - å¯†ç ï¼šyour_passwordï¼ˆè‡³å°‘6ä¸ªå­—ç¬¦ï¼‰

# 4. è‡ªåŠ¨è¿›å…¥ç®¡ç†åå°
# å¼€å§‹å®¡æ ¸å’Œç®¡ç†æ¡ˆä¾‹
```

### å®¹å™¨éƒ¨ç½²

```bash
# Dockerfileç¤ºä¾‹
FROM python:3.9-slim

WORKDIR /app
COPY . .
RUN pip install -r requirements.txt

EXPOSE 5000
CMD ["python", "app.py"]
```

```bash
# è¿è¡Œå®¹å™¨
docker build -t case-platform .
docker run -d -p 5000:5000 \
  -v $(pwd)/data:/app/data \
  -v $(pwd)/.auth:/app/.auth \
  case-platform
```

### Kuberneteséƒ¨ç½²

```yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: case-platform-data
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi

---
apiVersion: v1
kind: Pod
metadata:
  name: case-platform
spec:
  containers:
  - name: case-platform
    image: case-platform:latest
    ports:
    - containerPort: 5000
    volumeMounts:
    - name: data
      mountPath: /app/data
  volumes:
  - name: data
    persistentVolumeClaim:
      claimName: case-platform-data
```

## ğŸ“ æœ€ä½³å®è·µ

1. **å®šæœŸä¿®æ”¹å¯†ç **ï¼šå»ºè®®æ¯3ä¸ªæœˆä¿®æ”¹ä¸€æ¬¡ç®¡ç†å‘˜å¯†ç 
2. **å¼ºå¯†ç ç­–ç•¥**ï¼šä½¿ç”¨å¤æ‚å¯†ç ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
3. **å¤‡ä»½æ•°æ®**ï¼šå®šæœŸå¤‡ä»½.authæ–‡ä»¶å’Œdataç›®å½•
4. **HTTPSè®¿é—®**ï¼šç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®SSLè¯ä¹¦
5. **é™åˆ¶è®¿é—®**ï¼šä½¿ç”¨é˜²ç«å¢™é™åˆ¶ç®¡ç†åå°çš„è®¿é—®IP

## ğŸ“ å¼€å‘è¯´æ˜

### æ·»åŠ æ–°çš„è®¤è¯æ–¹æ³•

å¦‚éœ€ä½¿ç”¨å…¶ä»–è®¤è¯æ–¹å¼ï¼ˆå¦‚LDAPã€OAuthç­‰ï¼‰ï¼Œä¿®æ”¹`verify_admin_credentials`å‡½æ•°ï¼š

```python
def verify_admin_credentials(username, password):
    # ç°æœ‰æ–¹æ³•
    auth_data = load_auth_data()
    if auth_data and auth_data.get('username') == username:
        if hash_password(password) == auth_data.get('password_hash'):
            return True

    # æ·»åŠ æ–°æ–¹æ³•
    # if verify_with_ldap(username, password):
    #     return True

    return False
```

### è‡ªå®šä¹‰å¯†ç åŠ å¯†ç®—æ³•

ä¿®æ”¹`hash_password`å‡½æ•°ï¼š

```python
def hash_password(password):
    # ä½¿ç”¨bcryptæ›¿ä»£SHA256ï¼ˆæ›´å®‰å…¨ï¼‰
    import bcrypt
    return bcrypt.hashpw(password.encode('utf-8'), bcrypt.gensalt()).decode()
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
1. åº”ç”¨ç‰ˆæœ¬ï¼š`git log -1`
2. Pythonç‰ˆæœ¬ï¼š`python --version`
3. é”™è¯¯æ—¥å¿—ï¼šåº”ç”¨è¾“å‡ºçš„å®Œæ•´é”™è¯¯ä¿¡æ¯
4. æ“ä½œç³»ç»Ÿï¼š`cat /etc/os-release`

---

**ç‰ˆæœ¬**ï¼šv2.0
**æ›´æ–°æ—¥æœŸ**ï¼š2026-01-19
**ç»´æŠ¤**ï¼šOctopusAI Team
